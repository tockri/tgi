!function(t){function n(o){if(e[o])return e[o].exports;var i=e[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){"use strict";function o(){$("#startbutton").click(function(){a.initSound(),s.send("modstatus",{data:{Recording:!0}})}),$("#stopbutton").click(function(){s.send("modstatus",{data:{Recording:!1}})})}function i(t){var n=$("#startbutton"),e=$("#stopbutton");"Initialized"===t.AIRStatus?(n.attr("disabled",!1),e.attr("disabled",!1)):(n.attr("disabled",!0),e.attr("disabled",!0)),t.Recording?(a.initSoundWithDialog("記録中です。OKをクリックしてください。"),e.show(),n.hide()):(e.hide(),n.show())}e(1);e(2);e(5);var a=e(7),s=e(3),c=e(6);$(function(){c.get(i),c.onChange(i),o()})},function(t,n,e){"use strict";var o={API_ROOT:"/api/",SOCKET_URL:"ws://"+location.hostname+":8002",COLORMAP_URL:"colormap"};t.exports=o},function(t,n,e){"use strict";function o(){$("#colormap-image").attr("src",a.COLORMAP_URL+"?r="+Math.random())}var i=e(3),a=e(1),s={img:null};$(function(){s.img=$("#thermo-image"),i.onMessage("blob",function(t){var n=new Blob([t],{type:"image/png"});s.img.attr("src",URL.createObjectURL(n))}),i.onMessage("ColorMap",function(t){o()}),o()}),t.exports=s},function(t,n,e){"use strict";function o(t){f=0;var n=t.data;if(n.constructor===String){var e=n.match(/^([^\t]+)\t([\s\S]+)/);if(e){var o=e[1];if(u[o]){var n=$.parseJSON(e[2]);$.each(u[o],function(t,e){e(n)})}}else r.log("unknown :"+n)}else n.constructor===Blob?u.blob&&$.each(u.blob,function(t,e){e(n)}):r.alert(n,"unknown data")}function i(){if(!l)try{l=new WebSocket(c),l.addEventListener("message",o),l.addEventListener("close",function(){l=null,r.log(l,"socket closed!"),++f<5?setTimeout(i,500):o({data:'ErrorClose	"通信切断しました。"'})})}catch(t){r.alert(t,"websocket failed.")}}var a=e(1),s=a.API_ROOT,c=a.SOCKET_URL,r=e(12),u={},l=null,f=0,d={onMessage:function(t,n){u[t]||(u[t]=[]),u[t].push(n),i()},send:function(t,n){n=n||{},$.ajax({url:s+t,async:"undefined"==typeof n.async?!0:n.async,dataType:"json",data:$.extend(!0,{r:Math.random()},n.data),success:function(e){r.log(e,"send("+t+"):success"),e.Success?n.success&&(n.wait?$(function(){n.success(e)}):n.success(e)):(r.log(e,t+" failed."),n.fail?n.wait?$(function(){n.fail(e)}):n.fail(e):alert(t+" failed."))},error:function(t,e,o){r.log([t,e,o],"send error."),n.error&&(n.wait?$(function(){n.error(e,o)}):n.error(e,o))}})}};t.exports=d},function(t,n,e){"use strict";var o={escape:function(t){return t?(""+t).replace(/[&<>"'\n\r 〜]/g,function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","\n":"<br>","\r":""," ":"&nbsp;","〜":"&#65374;"}[t]}):""}};t.exports=o},function(t,n,e){"use strict";function o(t){r.Main=t;var n=$("#watchbox1-1"),e=$("#watchbox1-2");if(n.show(),"single"===t.Mode.toLowerCase())e.hide(),n.css({left:t.Left,top:t.Top,width:t.Width,height:t.Height});else{var o=(t.Width-t.Gap)/2;n.css({left:t.Left,top:t.Top,width:o,height:t.Height}),e.css({left:t.Left+o+t.Gap,top:t.Top,width:o,height:t.Height}),e.show()}}function i(t){r.Sub=t;var n=$("#watchbox2");n.css({left:t.Left,top:t.Top,width:t.Width,height:t.Height}),n.show()}function a(){c&&$.each(c,function(t,n){n()})}var s=e(3),c=[],r={Main:null,Sub:null,onChange:function(t){"function"==typeof t&&c.push(t)},updated:function(t){o(t.Main),i(t.Sub),a()}};s.onMessage("Watchbox",function(t){$(function(){o(t.Main),i(t.Sub),a()})}),$(function(){s.send("watchbox",{success:function(t){o(t.Main),i(t.Sub),a()}})}),t.exports=r},function(t,n,e){"use strict";function o(){$.each(s,function(t,n){n(a)})}var i=e(3),a=null,s=[],c={get:function(t){a?t&&t(a):i.send("status",{success:function(n){a=n,t&&t(a),o()}})},onChange:function(t){s.push(t)}};i.onMessage("Status",function(t){a=t,o()}),t.exports=c},function(t,n,e){"use strict";function o(t){"NotConnected"===t.AIRStatus?p.show("赤外線カメラが接続されていません。"):"NotInitialized"===t.AIRStatus?p.show("赤外線カメラが初期化されていません。"):"Initializing"===t.AIRStatus?p.show("赤外線カメラの初期化中です。"):null!==s&&"Initializing"!==s||"Initialized"!==t.AIRStatus||p.show("赤外線カメラの初期化完了しました。",1e3),t.Recording||p.stopAlerm(),s=t.AIRStatus}var i,a,s,c=e(4),r=e(3),u=e(6),l=e(12),f=!1,d=!1,p={show:function(t,n){$("#message-pane .alert.alert-info").remove();var e=$('<div class="alert alert-info">'+c.escape(t)+"</div>");$("#message-pane").prepend(e),n&&setTimeout(function(){e.slideUp(function(){e.remove()})},n)},alert:function(t,n,e){if($("#message-pane .alert.alert-danger").remove(),i&&clearTimeout(i),t){var o=$('<div class="alert alert-danger">'+c.escape(t)+"</div>");$("#message-pane").prepend(o),n&&(i=setTimeout(function(){o.slideUp(function(){o.remove()})},n))}if(e&&f){var s=$("#alerm-sound");s.length&&(a||(a=!0,s[0].play(),l.log(s[0],"alerm play"),setTimeout(function(){s[0].pause(),a=!1},2e3)))}},stopAlerm:function(){if(a){var t=$("#alerm-sound");t[0].pause(),a=!1}},initSound:function(){if(!f){var t=$("#alerm-sound")[0];t.play(),t.pause(),f=!0}},initSoundWithDialog:function(t){if(!f&&!d){d=!0;var n=$('<div><div class="m">'+t+'</div><div class="b"></div></div>');n.css({position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.75)"}),n.find(".m").css({color:"white",fontSize:"200%",margin:"100px 20px",textAlign:"center"});var e=$('<button type="button">OK</button>');e.css({padding:"10px 30px",fontSize:"200%",color:"black",borderRadius:4,background:"#ccc"}),n.find(".b").css({textAlign:"center"}).append(e),e.click(function(){p.initSound(),setTimeout(function(){n.remove()},100)}),$("body").append(n)}}};r.onMessage("ErrorMessage",function(t){p.alert(t,3e3)}),r.onMessage("InfoMessage",function(t){p.show(t,3e3)}),r.onMessage("TempAlerm",function(t){p.alert(t,5e3,!0)}),r.onMessage("TempWarn",function(t){p.alert(t,5e3,!1)}),r.onMessage("ErrorClose",function(t){p.alert(t)}),u.onChange(o),$(function(){u.get(o);var t=$("#alerm-sound");if(t.length){t[0]}}),t.exports=p},,,,,function(t,n,e){"use strict";var o={log:function(t,n){"object"==typeof console?console.debug(n,t):alert({message:n,obj:t})},alert:function(t,n){o.log(t,n),alert([t,n])}};t.exports=o}]);