!function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={exports:{},id:a,loaded:!1};return e[a].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function a(){n(9),$("#config-form").tabstrip({selected:function(e){switch(e.attr("id")){case"tab-main":$("#watchbox-main").removeClass("hidden"),$("#watchbox-sub").addClass("hidden");break;case"tab-sub":$("#watchbox-main").addClass("hidden"),$("#watchbox-sub").removeClass("hidden");break;case"tab-other":$("#watchbox-main").addClass("hidden"),$("#watchbox-sub").addClass("hidden")}}})}function i(e,t){var n=["up","left","right","down","narrow","wide","gapnarrow","gapwide"];$.each(n,function(n,a){$("#"+e+"-"+a).attr("value",t?"10":"1")})}function o(){$("#config-form button.btn").click(function(){var e=this.id,t=$(this),n=t.closest(".tab-pane").attr("id");if(t.blur(),"config-main"===n||"config-sub"===n)if("main-fast"===e)t.toggleClass("btn-info"),i("main",t.is(".btn-info"));else if("sub-fast"===e)t.toggleClass("btn-info"),i("sub",t.is(".btn-info"));else{var a={Key:e,Value:t.val()};d.send("modwatchbox",{data:a,success:function(e){p.updated(e)}})}})}function s(){var e=f.escape;d.send("configOptions",{wait:!0,success:function(t){$.each(["ThresholdSet","ColorMap"],function(n,a){var i=$("#select-"+a);i.html('<option value=""></option>'),$.each(t[a],function(t,n){i.append('<option value="'+t+'">'+e(n)+"</option>")})})}})}function c(){$("#config-form select").change(function(){var e=this.name,t=$(this);if(t.val()){var n={};n[e]=t.val(),d.send("modconfig",{data:n})}else alert("未選択にすることはできません。")})}function r(){var e=f.escape;d.send("config",{wait:!0,success:function(t){t.Values&&$.each(t.Values,function(t,n){var a=$("#span-"+t);if(a.length)a.html(e(n?n:"(未設定)"));else{var i=$("#select-"+t);i.length&&i.val(n)}})}})}function u(){p.Main&&("Double"===p.Main.Mode?($("#main-double").addClass("active"),$("#main-single").removeClass("active"),$("#main-gapnarrow").attr("disabled",!1),$("#main-gapwide").attr("disabled",!1)):($("#main-single").addClass("active"),$("#main-double").removeClass("active"),$("#main-gapnarrow").attr("disabled",!0),$("#main-gapwide").attr("disabled",!0)))}function l(e){e.Recording&&!l.redirected&&(l.redirected=!0,alert("記録中のため、記録画面に移動します。"),location.href="index.html")}n(1);var d=(n(2),n(3)),f=n(5),p=n(6),h=n(7);n(8);$(function(){a(),o(),s(),r(),c(),h.get(l),h.onChange(l)}),p.onChange(u)},function(e,t){"use strict";var n={API_ROOT:"/api/",SOCKET_URL:"ws://"+location.hostname+":8002",COLORMAP_URL:"colormap"};e.exports=n},function(e,t,n){"use strict";function a(){$("#colormap-image").attr("src",o.COLORMAP_URL+"?r="+Math.random())}var i=n(3),o=n(1),s={img:null};$(function(){s.img=$("#thermo-image"),i.onMessage("blob",function(e){var t=new Blob([e],{type:"image/png"});s.img.attr("src",URL.createObjectURL(t))}),i.onMessage("ColorMap",function(e){a()}),a()}),e.exports=s},function(e,t,n){"use strict";function a(e){var t=e.data;if(t.constructor===String){var n=t.match(/^([^\t]+)\t([\s\S]+)/);if(n){var a=n[1];if(d="ConnectionRefused"==a?f:0,u[a]){var i=$.parseJSON(n[2]);$.each(u[a],function(e,t){t(i)})}}else r.log("unknown :"+t)}else t.constructor===Blob?(d=0,u.blob&&$.each(u.blob,function(e,n){n(t)})):r.alert(t,"unknown data")}function i(){if(!l)try{l=new WebSocket(c),l.addEventListener("message",a),l.addEventListener("close",function(){l=null,r.log(l,"socket closed!"),++d<f?setTimeout(i,500):a({data:'ErrorClose\t"通信切断しました。"'})})}catch(e){r.alert(e,"websocket failed.")}}var o=n(1),s=o.API_ROOT,c=o.SOCKET_URL,r=n(4),u={},l=null,d=0,f=5,p={onMessage:function(e,t){u[e]||(u[e]=[]),u[e].push(t),i()},send:function(e,t){l&&(t=t||{},$.ajax({url:s+e,async:"undefined"==typeof t.async||t.async,dataType:"json",data:$.extend(!0,{r:Math.random()},t.data),success:function(n){r.log(n,"send("+e+"):success"),n.Success?t.success&&(t.wait?$(function(){t.success(n)}):t.success(n)):(r.log(n,e+" failed."),t.fail?t.wait?$(function(){t.fail(n)}):t.fail(n):alert(e+" failed."))},error:function(e,n,a){r.log([e,n,a],"send error."),t.error&&(t.wait?$(function(){t.error(n,a)}):t.error(n,a))}}))}};e.exports=p},function(e,t){"use strict";var n={log:function(e,t){"object"==typeof console?console.debug(t,e):alert({message:t,obj:e})},alert:function(e,t){n.log(e,t),alert([e,t])}};e.exports=n},function(e,t){"use strict";var n={escape:function(e){return e?(""+e).replace(/[&<>"'\n\r 〜]/g,function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","\n":"<br>","\r":""," ":"&nbsp;","〜":"&#65374;"}[e]}):""}};e.exports=n},function(e,t,n){"use strict";function a(e){r.Main=e;var t=$("#watchbox1-1"),n=$("#watchbox1-2");if(t.show(),"single"===e.Mode.toLowerCase())n.hide(),t.css({left:e.Left,top:e.Top,width:e.Width,height:e.Height});else{var a=(e.Width-e.Gap)/2;t.css({left:e.Left,top:e.Top,width:a,height:e.Height}),n.css({left:e.Left+a+e.Gap,top:e.Top,width:a,height:e.Height}),n.show()}}function i(e){r.Sub=e;var t=$("#watchbox2");t.css({left:e.Left,top:e.Top,width:e.Width,height:e.Height}),t.show()}function o(){c&&$.each(c,function(e,t){t()})}var s=n(3),c=[],r={Main:null,Sub:null,onChange:function(e){"function"==typeof e&&c.push(e)},updated:function(e){a(e.Main),i(e.Sub),o()}};s.onMessage("Watchbox",function(e){$(function(){a(e.Main),i(e.Sub),o()})}),$(function(){s.send("watchbox",{success:function(e){a(e.Main),i(e.Sub),o()}})}),e.exports=r},function(e,t,n){"use strict";function a(){$.each(s,function(e,t){t(o)})}var i=n(3),o=null,s=[],c={get:function(e){o?e&&e(o):i.send("status",{success:function(t){o=t,e&&e(o),a()}})},onChange:function(e){s.push(e)}};i.onMessage("Status",function(e){o=e,a()}),e.exports=c},function(e,t,n){"use strict";function a(e){"NotConnected"===e.AIRStatus?p.show("赤外線カメラが接続されていません。"):"NotInitialized"===e.AIRStatus?p.show("赤外線カメラが初期化されていません。"):"Initializing"===e.AIRStatus?p.show("赤外線カメラの初期化中です。"):null!==s&&"Initializing"!==s||"Initialized"!==e.AIRStatus||p.show("赤外線カメラの初期化完了しました。",1e3),e.Recording||p.stopAlerm(),s=e.AIRStatus}var i,o,s,c=n(5),r=n(3),u=n(7),l=n(4),d=!1,f=!1,p={show:function(e,t){$("#message-pane .alert.alert-info").remove();var n=$('<div class="alert alert-info">'+c.escape(e)+"</div>");$("#message-pane").prepend(n),t&&setTimeout(function(){n.slideUp(function(){n.remove()})},t)},alert:function(e,t,n){if($("#message-pane .alert.alert-danger").remove(),i&&clearTimeout(i),e){var a=$('<div class="alert alert-danger">'+c.escape(e)+"</div>");$("#message-pane").prepend(a),t&&(i=setTimeout(function(){a.slideUp(function(){a.remove()})},t))}if(n&&d){var s=$("#alerm-sound");s.length&&(o||(o=!0,s.on("ended",function(){o&&this.play()}),s[0].play(),l.log(s[0],"alerm play"),setTimeout(function(){p.stopAlerm()},t||1e4)))}},stopAlerm:function(){if(o){var e=$("#alerm-sound");e[0].pause(),o=!1}},initSound:function(){if(!d){var e=$("#alerm-sound")[0];e.play(),e.pause(),d=!0}},initSoundWithDialog:function(e){if(!d&&!f){f=!0;var t=$('<div><div class="m">'+e+'</div><div class="b"></div></div>');t.css({position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.75)"}),t.find(".m").css({color:"white",fontSize:"200%",margin:"100px 20px",textAlign:"center"});var n=$('<button type="button">OK</button>');n.css({padding:"10px 30px",fontSize:"200%",color:"black",borderRadius:4,background:"#ccc"}),t.find(".b").css({textAlign:"center"}).append(n),n.click(function(){p.initSound(),setTimeout(function(){t.remove()},100)}),$("body").append(t)}}};r.onMessage("ErrorMessage",function(e){p.alert(e,3e3)}),r.onMessage("InfoMessage",function(e){p.show(e,3e3)}),r.onMessage("TempAlerm",function(e){p.alert(e,5e3,!0)}),r.onMessage("TempWarn",function(e){p.alert(e,5e3,!1)}),r.onMessage("ConnectionRefused",function(e){p.show(e),$("body").addClass("refused"),$("a,button").prop("disabled",!0),$("a").attr("href","#")}),r.onMessage("ErrorClose",function(e){p.alert(e)}),u.onChange(a),$(function(){u.get(a);var e=$("#alerm-sound");if(e.length){e[0]}}),e.exports=p},function(e,t){"use strict";$.fn.tabstrip=function(e){return this.each(function(){function t(t){if(!t.is(".selected")&&!t.is(".disabled")){var n=t.data("tab-pane");n&&(i.removeClass("selected"),t.addClass("selected"),o.hide(),n.show(),e.selected&&e.selected(t))}}var n=$(this);e=$.extend(!0,{},e);var a=n.children("ul"),i=a.find("li"),o=n.children("div");a.wrap('<div class="g-tabstrip-box"></div>');var s=a.closest(".g-tabstrip-box");a.addClass("g-tabstrip-row"),o.addClass("g-tabstrip-pane"),i.addClass("g-tabstrip-tab"),s.after('<div class="g-tabstrip-line"></div>'),i.each(function(e,t){var n=$(t),a=o.eq(e);n.data("tab-pane",a),n.css("width",100/i.length+"%")}),i.click(function(){t($(this))}),t(i.eq(e.initial||0))})}}]);