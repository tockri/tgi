!function(t){function n(i){if(e[i])return e[i].exports;var o=e[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){"use strict";function i(t){t.Recording&&!i.redirected&&(i.redirected=!0,alert("記録中のため、記録画面に移動します。"),location.href="index.html")}e(1),e(10),e(11),e(9),e(2),e(12);var o=e(3),s=e(7);$(function(){$("#detail-pane").tabstrip({}),$("#restart-button").click(function(){o.send("restart",{success:function(){$.countdown({count:10,message:"再起動中です...",hideCancel:!0,completed:function(){location.reload()}})}})}),$("#shutdown-button").click(function(){$.countdown({count:10,message:"融着機PCをシャットダウンしてよろしいですか？",dismissOnComplete:!1,completed:function(){o.send("shutdown",{success:function(){alert("PCの電源が切れるまでお待ちください。")}})}})}),s.get(i),s.onChange(i)})},function(t,n){"use strict";var e={API_ROOT:"/api/",SOCKET_URL:"ws://"+location.hostname+":8002",COLORMAP_URL:"colormap"};t.exports=e},function(t,n,e){"use strict";function i(){$("#colormap-image").attr("src",s.COLORMAP_URL+"?r="+Math.random())}var o=e(3),s=e(1),a={img:null};$(function(){a.img=$("#thermo-image"),o.onMessage("blob",function(t){var n=new Blob([t],{type:"image/png"});a.img.attr("src",URL.createObjectURL(n))}),o.onMessage("ColorMap",function(t){i()}),i()}),t.exports=a},function(t,n,e){"use strict";function i(t){var n=t.data;if(n.constructor===String){var e=n.match(/^([^\t]+)\t([\s\S]+)/);if(e){var i=e[1];if(d="ConnectionRefused"==i?f:0,u[i]){var o=$.parseJSON(e[2]);$.each(u[i],function(t,n){n(o)})}}else r.log("unknown :"+n)}else n.constructor===Blob?(d=0,u.blob&&$.each(u.blob,function(t,e){e(n)})):r.alert(n,"unknown data")}function o(){if(!l)try{l=new WebSocket(c),l.addEventListener("message",i),l.addEventListener("close",function(){l=null,r.log(l,"socket closed!"),++d<f?setTimeout(o,500):i({data:'ErrorClose	"通信切断しました。"'})})}catch(t){r.alert(t,"websocket failed.")}}var s=e(1),a=s.API_ROOT,c=s.SOCKET_URL,r=e(4),u={},l=null,d=0,f=5,p={onMessage:function(t,n){u[t]||(u[t]=[]),u[t].push(n),o()},send:function(t,n){l&&(n=n||{},$.ajax({url:a+t,async:"undefined"==typeof n.async?!0:n.async,dataType:"json",data:$.extend(!0,{r:Math.random()},n.data),success:function(e){r.log(e,"send("+t+"):success"),e.Success?n.success&&(n.wait?$(function(){n.success(e)}):n.success(e)):(r.log(e,t+" failed."),n.fail?n.wait?$(function(){n.fail(e)}):n.fail(e):alert(t+" failed."))},error:function(t,e,i){r.log([t,e,i],"send error."),n.error&&(n.wait?$(function(){n.error(e,i)}):n.error(e,i))}}))}};t.exports=p},function(t,n){"use strict";var e={log:function(t,n){"object"==typeof console?console.debug(n,t):alert({message:n,obj:t})},alert:function(t,n){e.log(t,n),alert([t,n])}};t.exports=e},function(t,n){"use strict";var e={escape:function(t){return t?(""+t).replace(/[&<>"'\n\r 〜]/g,function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","\n":"<br>","\r":""," ":"&nbsp;","〜":"&#65374;"}[t]}):""}};t.exports=e},,function(t,n,e){"use strict";function i(){$.each(a,function(t,n){n(s)})}var o=e(3),s=null,a=[],c={get:function(t){s?t&&t(s):o.send("status",{success:function(n){s=n,t&&t(s),i()}})},onChange:function(t){a.push(t)}};o.onMessage("Status",function(t){s=t,i()}),t.exports=c},function(t,n,e){"use strict";function i(t){"NotConnected"===t.AIRStatus?p.show("赤外線カメラが接続されていません。"):"NotInitialized"===t.AIRStatus?p.show("赤外線カメラが初期化されていません。"):"Initializing"===t.AIRStatus?p.show("赤外線カメラの初期化中です。"):null!==a&&"Initializing"!==a||"Initialized"!==t.AIRStatus||p.show("赤外線カメラの初期化完了しました。",1e3),t.Recording||p.stopAlerm(),a=t.AIRStatus}var o,s,a,c=e(5),r=e(3),u=e(7),l=e(4),d=!1,f=!1,p={show:function(t,n){$("#message-pane .alert.alert-info").remove();var e=$('<div class="alert alert-info">'+c.escape(t)+"</div>");$("#message-pane").prepend(e),n&&setTimeout(function(){e.slideUp(function(){e.remove()})},n)},alert:function(t,n,e){if($("#message-pane .alert.alert-danger").remove(),o&&clearTimeout(o),t){var i=$('<div class="alert alert-danger">'+c.escape(t)+"</div>");$("#message-pane").prepend(i),n&&(o=setTimeout(function(){i.slideUp(function(){i.remove()})},n))}if(e&&d){var a=$("#alerm-sound");a.length&&(s||(s=!0,a[0].play(),l.log(a[0],"alerm play"),setTimeout(function(){a[0].pause(),s=!1},2e3)))}},stopAlerm:function(){if(s){var t=$("#alerm-sound");t[0].pause(),s=!1}},initSound:function(){if(!d){var t=$("#alerm-sound")[0];t.play(),t.pause(),d=!0}},initSoundWithDialog:function(t){if(!d&&!f){f=!0;var n=$('<div><div class="m">'+t+'</div><div class="b"></div></div>');n.css({position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.75)"}),n.find(".m").css({color:"white",fontSize:"200%",margin:"100px 20px",textAlign:"center"});var e=$('<button type="button">OK</button>');e.css({padding:"10px 30px",fontSize:"200%",color:"black",borderRadius:4,background:"#ccc"}),n.find(".b").css({textAlign:"center"}).append(e),e.click(function(){p.initSound(),setTimeout(function(){n.remove()},100)}),$("body").append(n)}}};r.onMessage("ErrorMessage",function(t){p.alert(t,3e3)}),r.onMessage("InfoMessage",function(t){p.show(t,3e3)}),r.onMessage("TempAlerm",function(t){p.alert(t,5e3,!0)}),r.onMessage("TempWarn",function(t){p.alert(t,5e3,!1)}),r.onMessage("ConnectionRefused",function(t){p.show(t),$("body").addClass("refused"),$("a,button").prop("disabled",!0),$("a").attr("href","#")}),r.onMessage("ErrorClose",function(t){p.alert(t)}),u.onChange(i),$(function(){u.get(i);var t=$("#alerm-sound");if(t.length){t[0]}}),t.exports=p},function(t,n){"use strict";$.fn.tabstrip=function(t){return this.each(function(){function n(n){if(!n.is(".selected")&&!n.is(".disabled")){var e=n.data("tab-pane");e&&(o.removeClass("selected"),n.addClass("selected"),s.hide(),e.show(),t.selected&&t.selected(n))}}var e=$(this);t=$.extend(!0,{},t);var i=e.children("ul"),o=i.find("li"),s=e.children("div");i.wrap('<div class="g-tabstrip-box"></div>');var a=i.closest(".g-tabstrip-box");i.addClass("g-tabstrip-row"),s.addClass("g-tabstrip-pane"),o.addClass("g-tabstrip-tab"),a.after('<div class="g-tabstrip-line"></div>'),o.each(function(t,n){var e=$(n),i=s.eq(t);e.data("tab-pane",i),e.css("width",100/o.length+"%")}),o.click(function(){n($(this))}),n(o.eq(t.initial||0))})}},function(t,n,e){function i(){var t=$("#site-select");u.send("sites",{wait:!0,success:function(n){var e=l.escape;t.empty(),$.each(n.Sites,function(n,i){var o=e(i.DirName),s=e(i.SiteName);t.append('<option value="'+o+'">'+s+" ("+o+")</option>")}),d.get(function(n){t.val(n.SiteDirName)})}})}function o(){var t=$("#site-select");i(),t.change(function(){var n=t.find("option:selected"),e=n.text(),i=n.val();confirm("使用するサイト設定を "+e+" に変更してよろしいですか？")&&u.send("selectSite",{data:{DirName:i},success:function(t){f.fetchValues(i)}})})}function s(){$("#site-duplicate-button").click(function(){if(confirm("このサイト設定を複製して、新しいサイト設定を登録しますか？")){var t=$("#site-select"),n=t.val();u.send("duplicate",{data:{DirName:n},success:function(n){i(),f.setFormValues(n.Values);var e=n.Values.DirName;u.send("selectSite",{data:{DirName:e},success:function(n){t.val(e)}}),alert("サイト設定を複製しました。")}})}})}function a(){var t=l.escape;u.send("configOptions",{wait:!0,success:function(n){$.each(["ThresholdSet","ColorMap","CofFile"],function(e,i){var o=$("#select-"+i);o.html('<option value=""></option>'),$.each(n[i],function(n,e){o.append('<option value="'+n+'">'+t(e)+"</option>")})})}})}function c(){var t=$("#form-siteform");t.find(":radio").click(function(){r()}),t.find(":text,textarea").change(function(){var t=$(this),n=t.closest(".input-group").find(".btn");n.removeClass(t,"btn-default").addClass("btn-primary")}),t.find(".input-group .btn").click(function(){r()}),t.find("select").change(function(){r()})}function r(){var t=$("#form-siteform"),n={};$.each(t.serializeArray(),function(t,e){n[e.name]=e.value}),u.send("modconfig",{data:n,success:function(){t.find(".btn.btn-primary").removeClass("btn-primary").addClass("btn-default"),i(),alert("サイト情報を更新しました。")}})}var u=e(3),l=e(5),d=e(7),f=(e(8),{fetchValues:function(t){u.send("config",{data:{DirName:t},success:function(t){f.setFormValues(t.Values)}})},setFormValues:function(t){var n=$("#form-siteform");$.each(t,function(t,e){var i=n.find("input:radio[name="+t+"]");if(i&&i.length)i.filter("[value="+e+"]").attr("checked",!0);else{var o=n.find("input[name="+t+"],select[name="+t+"],textarea[name="+t+"]");o.length&&o.val(e)}})}});a(),$(function(){o(),s(),d.get(function(t){f.fetchValues(t.SiteDirName)}),c()}),t.exports=f},function(t,n,e){"use strict";function i(){$(".signaltemp-info").hide(),c(),$("#color-abortbutton").hide().click(function(){c()}),$("#color-startbutton").click(function(){f.send("signaltemp-step0",{success:function(t){r()}})}),$("#image-pane .viewer").click(function(t){switch(t.preventDefault(),t.stopPropagation(),g){case 1:o(t.offsetX,t.offsetY);break;case 2:s(t.offsetX,t.offsetY)}}),$("#signaltemp-form").submit(function(){return 3!==g?!1:void a($(this))})}function o(t,n){$("#point1").show().css({top:n-4,left:t-4}),f.send("signaltemp-step1",{data:{x:t,y:n},success:function(t){var n=$("#signaltemp-form");$("#color-monitor1").css("background-color",t.Color),v=t.Signal,n.find("input[name=signal1]").val(t.Signal),n.find("input[name=temp1]").val(t.Temp),u()}})}function s(t,n){$("#point2").show().css({top:n-4,left:t-4}),f.send("signaltemp-step2",{data:{x:t,y:n},success:function(t){if(Math.abs(v-t.Signal)<1e3)return void alert("できるだけ温度の離れた2点を選択してください。");var n=$("#signaltemp-form");$("#color-monitor2").css("background-color",t.Color),n.find("input[name=signal2]").val(t.Signal),n.find("input[name=temp2]").val(t.Temp),l()}})}function a(t){var n={};return $.each(t.serializeArray(),function(t,e){n[e.name]=e.value}),Math.abs(n.temp1-n.temp2)<30?void alert("30℃以上の温度差を入力してください。"):(f.send("signaltemp-submit",{data:n,success:function(t){c(),$("#info4").slideDown(),setTimeout(function(){$("#info4").slideUp()},3e3)}}),void p.log(n,"form values"))}function c(){g=0,v=0,$("#color-monitor1").css("background-color","#f0f0f0"),$("#color-monitor2").css("background-color","#f0f0f0"),$("#color-submitbutton").attr("disabled",!0);var t=$("#signaltemp-form");t.find("input").val(""),$(".signaltemp-info:visible").slideUp(),$("#color-startbutton").show(),$("#color-abortbutton").hide(),$("#signaltemp-pane .point").hide()}function r(){g=1,$("#color-submitbutton").attr("disabled",!0);var t=$("#signaltemp-form");t.find("input").val(""),$(".signaltemp-info:not(#info1):visible").slideUp(),$("#info1").slideDown(),$("#color-startbutton").hide(),$("#color-abortbutton").show(),$(".color-monitor").css("background","transparent")}function u(){g=2,$("#color-submitbutton").attr("disabled",!0),$(".signaltemp-info:not(#info2):visible").slideUp(),$("#info2").slideDown()}function l(){g=3,$("#color-submitbutton").attr("disabled",!1),$(".signaltemp-info:not(#info3):visible").slideUp(),$("#info3").slideDown()}function d(t){var n=$("#color-startbutton");"Initialized"===t.AIRStatus?n.attr("disabled",!1):n.attr("disabled",!0)}var f=e(3),p=e(4),m=e(7),g=0,v=0;$(function(){i(),m.get(d),m.onChange(d)})},function(t,n){!function(t){function n(t){this.options=t,this.init()}n.prototype={membrane:null,base:null,message:null,counter:null,options:null,timer:0,init:function(){this.initMembrane(),this.initBase(),this.initMessage(),this.initCounter(),this.initButton(),this.adjustBase()},initMembrane:function(){var n=t('<div><div class="cd-base"><div class="cd-message"></div><div class="cd-counter"></div><button type="button" class="cd-cancel-button">キャンセル</button></div></div>');this.options.hideCancel&&n.find(".cd-cancel-button").hide(),n.css({zIndex:999,position:"fixed",verticalAlign:"middle",textAlign:"center",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",opacity:0}),t("body").append(n),this.membrane=n},initBase:function(){var t=this.membrane.find(".cd-base");t.css({position:"absolute",top:0,left:0}),this.base=t},initMessage:function(){var t=this.base.find(".cd-message");t.css({fontSize:24,color:"white",paddingLeft:10,paddingRight:10}),t.text(this.options.message),this.message=t},initCounter:function(){var n=this.base.find(".cd-counter"),e=t(window),i=e.width(),o=e.height();n.css({fontSize:Math.max(i,o)/4,fontFamily:"Impact",color:"white",marginTop:-10,marginBottom:-10}),n.text(this.options.count),this.counter=n},initButton:function(){var t=this.base.find(".cd-cancel-button");t.css({fontSize:24,padding:12});var n=this;t.click(function(){n.timer&&clearTimeout(n.timer),n.membrane.remove(),n.options.canceled&&n.options.canceled()}),this.button=t},adjustBase:function(){var t=this.base,n=this.membrane;setTimeout(function(){var e=t.width(),i=t.height();t.css({marginLeft:-e/2,marginTop:-i/2,top:"50%",left:"50%"}),n.css("opacity",1)},50)}},t.countdown=function(e){function i(){s--,o.counter.text(s),0===s?(o.button.hide(),e.completed&&e.completed(),e.dismissOnComplete&&o.membrane.remove()):o.timer=setTimeout(i,1e3)}e=t.extend({count:10,message:"",completed:null,canceled:null,dismissOnComplete:!0,hideCancel:!1},e);var o=new n(e),s=e.count+1;i()}}(jQuery)}]);